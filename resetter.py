import sys
import traceback
from easysnmp import Session

if len(sys.argv) != 2:
    print('Usage: python resetter.py PRINTER_IP')
    sys.exit('Error: Missing printer IP')

PRINTER_IP = sys.argv[1]

try:
    session = Session(hostname=PRINTER_IP, community='public', version=1)
    object_ids = [
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.118.105.1.0.0',
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.115.116.1.0.1',
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.124.124.16.0.151.7.66.189.33.48.0.0.78.98.115.106.99.98.122.98',
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.124.124.16.0.151.7.66.189.33.49.0.0.78.98.115.106.99.98.122.98',
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.124.124.16.0.151.7.66.189.33.47.0.0.78.98.115.106.99.98.122.98',
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.124.124.16.0.151.7.66.189.33.52.0.0.78.98.115.106.99.98.122.98',
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.124.124.16.0.151.7.66.189.33.53.0.0.78.98.115.106.99.98.122.98',
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.124.124.16.0.151.7.66.189.33.54.0.94.78.98.115.106.99.98.122.98',
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.124.124.16.0.151.7.66.189.33.50.0.0.78.98.115.106.99.98.122.98',
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.124.124.16.0.151.7.66.189.33.51.0.0.78.98.115.106.99.98.122.98',
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.124.124.16.0.151.7.66.189.33.47.0.0.78.98.115.106.99.98.122.98',
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.124.124.16.0.151.7.66.189.33.55.0.94.78.98.115.106.99.98.122.98',
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.124.124.16.0.151.7.66.189.33.28.0.0.78.98.115.106.99.98.122.98',
        '1.3.6.1.4.1.1248.1.2.2.44.1.1.2.1.99.100.1.0.0',
    ]

    for id in object_ids:
        response = session.get(id)
        print(response)
    print('Restart your printer!')

except Exception as e:
    print('Error connecting to the printer.')
    print()
    print(traceback.print_tb(e.__traceback__))